= Teststrategie
Vorname Nachname <email@domain.org>; Vorname2 Nachname2 <email2@domain.org>; Vorname3 Nachname3 <email3@domain.org>
{localdatetime}
include::../_includes/default-attributes.inc.adoc[]

== Allgemeines
Dieses Dokument beschreibt die Teststrategie des Teams. Es wird festgeschrieben, wann, wie und von was getestet werden soll und wie mit den Ergebnissen umgegangen wird.

== Manuelle Akzeptanztests
=== Pull Requests
Es wird sich gegenseitig kontrolliert. Gemäß Git-Workflow des Teams wird für jede Änderung am bestehenden Projektstand ein Branch erstellt, am Ende der Arbeit an der jeweiligen Aufgabe dann eine Pull Request. Diese *muss* von mindestens einem anderen Team-Mitglied gesichtigt werden, bevor gemergt wird. Welches Team Mitglied genau als Kontrolle dient, soll nicht klar festgelegt werden, jedoch sollte die Wahl gut begründet sein. Der Aufgabenbereich der Person soll eine Kontrollkompetenz hergeben.
Hier geht es sowohl um konzeptionelle, sachliche Richtigkeit, als auch um die Sicherstellung von Codequalität.

Es handelt sich hierbei um manuelle Modul und Integrationstests.

=== Product Owner
Spätestens am Ende des Sprints müssen die durchgeführten Änderungen am Produkt durch den Product Owner abgenommen und abgenickt werden. Erst dann gilt die Aufgabe als abgeschlossen. Dabei geht es darum, ob die Vorgaben gemäß User Story erfüllt wurden.

Es handelt sich hierbei um manuelle Systemtests.

=== Review
Am Ende des Sprints soll mindestens ein Review mit dem vorgeschriebenen Review Team durchgeführt werden. Das Review soll erst stattfinden, nachdem der Product Owner die neuen features abgenommen hat, es ersetzt diese Abnahme nicht.

Es handelt sich hierbei um einen Abnahmetest.

== Automatisierte Softwaretests

=== Grundsätzliches
Das Ziel ist vollständige Automatisierung der Tests. Um das zu ermöglichen, sollen die Tests als GitHub Action eingebunden werden.
Tests sollen die Softwarequalität gewährleisten, deshalb kommt ihnen eine besondere Wichtigkeit zu. Tests müssen vollständig von Menschen geschrieben sein, es herrscht eine *absolute Nulltoleranz gegenüber KI-generiertem Testcode*. Um gut zu testen, muss kritisch über den Code nachgedacht werden. Das können Menschen besser als KI.

Änderungen bei Testquellcode werden behandelt wie im restlichen Git Workflow. Als Reviewer muss hier jedoch mindestens einer der festgelegten Tester angefragt werden.

* Johann - Tests Frontend
* Marius - Tests Backend

Sollten die Änderungen von einem Tester kommen, muss eine andere fachlich passende Person aus dem Team eingeschaltet werden.

Bei fehlgeschlagenen Tests ist die Ursache des erkannten Fehlers gründlich zu prüfen. Es werden pauschal keine Pull Requests akzeptiert, bei denen automatisierte Tests fehlgeschlagen sind. Dabei ist es unerheblich, ob der Grund darin in der eigentlichen Funktionalität oder den Tests selbst liegt. Dadurch sollen die anfallenden technischen Testschulden zumindests etwas eingedämmt werden.

=== Umfang
Eine vollständige Testabdeckung wird nicht angestrebt. Es sollen aber Testfälle für die grundlegendsten Komponenten existieren. Das Ziel der automatisierten Test ist weniger die Softwarequalität zu garantieren, es soll vielmehr das Verständnis des Erstellens von Tests und der Automatisierung durch GitHub Actions gefördert werden.

=== Tests Backend
Als API-Test Client wird bruno benutzt.
https://www.usebruno.com/

Die Backend Test sind streng genommen Integrationstests, da sie keine einzelnen Klassen / Funktionalitäten auf ihre Richtigkeit überprüfen, sondern das korrekte Systemverhalten, in diesem Fall das korrekte Verhalten der API. Das hat den Grund, das das Backend aufgrund seiner Struktur Modultests schlecht ermöglicht. Die möglichen "testbaren" Module sind theoretisch die Klassen der xref:../src/backend/models.py[models.py]. Diese halten jedoch nur Variablen und keine echte Funktionalität, weswegen sie schlecht testbar sind.

Um das Ergebnis von einem Test Run nachvollziehen zu können, sollen die Testergebnisse in einer Log Datei gespeichert werden. Ob immer neue Dateien erstellt werden, oder eine existierende Datei immer wieder überschrieben wird, ist dem Testenden überlassen.

==== Automatisierung Backend Tests
In der xref:../.github/workflows/api-test.yml[api-test.yml] ist ein Workflow definiert, der die API mit den definierten Tests automatisch testet.
Es gibt zwei Auslöser:

* Pushs
* Pull Requests

Der Workflow läuft nur dann, wenn auch relevante Daten für die Backend- und Testfunktionalität geändert wurden. Diese haben die folgenden Formate:

* .py (Funktionalität)
* .bru (Testlogik)
* .yml (Workflow)

=== Tests Frontend
Aktuell sind keine automatisierten Frontend Tests geplant.

Zum Einen fehlt das Know-How, zum Anderen herrscht im Frontend-Bereich eine hohe Änderungsrate des Codes. Deshalb wird auf automatisierte Frontend Tests verzichtet und rein auf manuelle, explorative Tests vertraut.

Sollte sich daran etwas ändern, wird hier mehr dazu erläutert.